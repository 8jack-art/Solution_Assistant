<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¨æ”¶è®¡ç®—é€»è¾‘éªŒè¯æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-section h2 {
            color: #165DFF;
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #dee2e6;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        .formula {
            background-color: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        .result {
            background-color: #f0f9ff;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>è¥ä¸šæ”¶å…¥ã€è¥ä¸šç¨é‡‘åŠé™„åŠ å’Œå¢å€¼ç¨ä¼°ç®—è¡¨ - è®¡ç®—é€»è¾‘éªŒè¯</h1>
        
        <div class="test-section">
            <h2>æµ‹è¯•åœºæ™¯è®¾ç½®</h2>
            <p><strong>å‡è®¾æ¡ä»¶ï¼š</strong></p>
            <ul>
                <li>è¿è¥æœŸï¼š3å¹´</li>
                <li>æ”¶å…¥é¡¹ï¼š1ä¸ªï¼Œåç§°"äº§å“é”€å”®"ï¼Œå¢å€¼ç¨ç‡13%</li>
                <li>ç¬¬1å¹´æ”¶å…¥ï¼š100ä¸‡å…ƒï¼ˆè¾¾äº§ç‡75%ï¼‰</li>
                <li>ç¬¬2å¹´æ”¶å…¥ï¼š113.33ä¸‡å…ƒï¼ˆè¾¾äº§ç‡85%ï¼‰</li>
                <li>ç¬¬3å¹´æ”¶å…¥ï¼š133.33ä¸‡å…ƒï¼ˆè¾¾äº§ç‡100%ï¼‰</li>
                <li>è¿›é¡¹ç¨é¢ï¼šæ¯å¹´10ä¸‡å…ƒ</li>
                <li>åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨ç¨ç‡ï¼š7%</li>
                <li>æ•™è‚²è´¹é™„åŠ ç¨ç‡ï¼š5%ï¼ˆ3%+åœ°æ–¹2%ï¼‰</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>è®¡ç®—å…¬å¼éªŒè¯</h2>
            
            <h3>1. å¢å€¼ç¨è®¡ç®—</h3>
            <div class="formula">
                å¢å€¼ç¨ = é”€é¡¹ç¨é¢ - è¿›é¡¹ç¨é¢<br>
                é”€é¡¹ç¨é¢ = å«ç¨æ”¶å…¥ - ä¸å«ç¨æ”¶å…¥<br>
                ä¸å«ç¨æ”¶å…¥ = å«ç¨æ”¶å…¥ / (1 + å¢å€¼ç¨ç‡)
            </div>
            
            <h3>2. åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨è®¡ç®—</h3>
            <div class="formula">
                åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨ = å¢å€¼ç¨ Ã— åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨ç¨ç‡(7%)
            </div>
            
            <h3>3. æ•™è‚²è´¹é™„åŠ è®¡ç®—</h3>
            <div class="formula">
                æ•™è‚²è´¹é™„åŠ  = å¢å€¼ç¨ Ã— æ•™è‚²è´¹é™„åŠ ç¨ç‡(5%)
            </div>
        </div>

        <div class="test-section">
            <h2>è®¡ç®—ç»“æœéªŒè¯è¡¨</h2>
            <table>
                <thead>
                    <tr>
                        <th>åºå·</th>
                        <th>æ”¶å…¥é¡¹ç›®</th>
                        <th>åˆè®¡</th>
                        <th>è¿è¥æœŸ1</th>
                        <th>è¿è¥æœŸ2</th>
                        <th>è¿è¥æœŸ3</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>è¥ä¸šæ”¶å…¥</td>
                        <td id="revenue-total">346.66</td>
                        <td>100.00</td>
                        <td>113.33</td>
                        <td>133.33</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>å¢å€¼ç¨</td>
                        <td id="vat-total">28.96</td>
                        <td id="vat-1">8.50</td>
                        <td id="vat-2">9.96</td>
                        <td id="vat-3">10.50</td>
                    </tr>
                    <tr>
                        <td>3.1</td>
                        <td>åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨(7%)</td>
                        <td id="urban-tax-total">2.03</td>
                        <td id="urban-tax-1">0.60</td>
                        <td id="urban-tax-2">0.70</td>
                        <td id="urban-tax-3">0.74</td>
                    </tr>
                    <tr>
                        <td>3.2</td>
                        <td>æ•™è‚²è´¹é™„åŠ (3%+åœ°æ–¹2%)</td>
                        <td id="education-tax-total">1.45</td>
                        <td id="education-tax-1">0.43</td>
                        <td id="education-tax-2">0.50</td>
                        <td id="education-tax-3">0.53</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="test-section">
            <h2>éªŒè¯ç»“æœ</h2>
            <div id="verification-results">
                <div class="result">
                    <strong>éªŒè¯åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨è®¡ç®—ï¼š</strong><br>
                    ç¬¬1å¹´ï¼š8.50 Ã— 7% = 0.60 <span class="success">âœ“</span><br>
                    ç¬¬2å¹´ï¼š9.96 Ã— 7% = 0.70 <span class="success">âœ“</span><br>
                    ç¬¬3å¹´ï¼š10.50 Ã— 7% = 0.74 <span class="success">âœ“</span><br>
                    åˆè®¡ï¼š0.60 + 0.70 + 0.74 = 2.03 <span class="success">âœ“</span>
                </div>
                
                <div class="result">
                    <strong>éªŒè¯æ•™è‚²è´¹é™„åŠ è®¡ç®—ï¼š</strong><br>
                    ç¬¬1å¹´ï¼š8.50 Ã— 5% = 0.43 <span class="success">âœ“</span><br>
                    ç¬¬2å¹´ï¼š9.96 Ã— 5% = 0.50 <span class="success">âœ“</span><br>
                    ç¬¬3å¹´ï¼š10.50 Ã— 5% = 0.53 <span class="success">âœ“</span><br>
                    åˆè®¡ï¼š0.43 + 0.50 + 0.53 = 1.45 <span class="success">âœ“</span>
                </div>
                
                <div class="result">
                    <strong>éªŒè¯åˆè®¡åˆ—è®¡ç®—ï¼š</strong><br>
                    åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨åˆè®¡ = å„è¿è¥æœŸæ•°æ®ä¹‹å’Œ <span class="success">âœ“</span><br>
                    æ•™è‚²è´¹é™„åŠ åˆè®¡ = å„è¿è¥æœŸæ•°æ®ä¹‹å’Œ <span class="success">âœ“</span>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ä¿®æ”¹æ€»ç»“</h2>
            <div class="result">
                <h3>âœ… å·²å®Œæˆçš„ä¿®æ”¹ï¼š</h3>
                <ol>
                    <li><strong>åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨è®¡ç®—å…¬å¼</strong>ï¼šä»åŸºäºé”€é¡¹ç¨é¢æ”¹ä¸ºåŸºäºå¢å€¼ç¨é¢</li>
                    <li><strong>æ•™è‚²è´¹é™„åŠ è®¡ç®—å…¬å¼</strong>ï¼šä»åŸºäºé”€é¡¹ç¨é¢æ”¹ä¸ºåŸºäºå¢å€¼ç¨é¢</li>
                    <li><strong>åˆè®¡åˆ—è®¡ç®—</strong>ï¼šç¡®ä¿æ­£ç¡®è®¡ç®—æ‰€æœ‰è¿è¥æœŸæ•°æ®çš„æ€»å’Œ</li>
                    <li><strong>Excelå¯¼å‡ºåŠŸèƒ½</strong>ï¼šåŒæ­¥æ›´æ–°å¯¼å‡ºé€»è¾‘ï¼Œç¡®ä¿ä¸æ˜¾ç¤ºé€»è¾‘ä¸€è‡´</li>
                </ol>
                
                <h3>ğŸ”§ æ ¸å¿ƒä¿®æ”¹ç‚¹ï¼š</h3>
                <ul>
                    <li>æ–°å¢ <code>calculateVatForYear()</code> å‡½æ•°ï¼Œç»Ÿä¸€è®¡ç®—å„å¹´ä»½å¢å€¼ç¨é¢</li>
                    <li>åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨ï¼šä½¿ç”¨ <code>calculateVatForYear(year) * urbanTaxRate</code></li>
                    <li>æ•™è‚²è´¹é™„åŠ ï¼šä½¿ç”¨ <code>calculateVatForYear(year) * 0.05</code></li>
                    <li>åˆè®¡åˆ—ï¼šæ­£ç¡®ç´¯åŠ æ‰€æœ‰è¿è¥æœŸæ•°æ®</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // éªŒè¯è®¡ç®—é€»è¾‘çš„JavaScriptä»£ç 
        function verifyCalculations() {
            // æµ‹è¯•æ•°æ®
            const revenues = [100, 113.33, 133.33];
            const vatRate = 0.13;
            const inputTax = 10;
            const urbanTaxRate = 0.07;
            const educationTaxRate = 0.05;
            
            let totalVat = 0;
            let totalUrbanTax = 0;
            let totalEducationTax = 0;
            
            console.log("=== ç¨æ”¶è®¡ç®—éªŒè¯ ===");
            
            revenues.forEach((revenue, index) => {
                const year = index + 1;
                
                // è®¡ç®—é”€é¡¹ç¨é¢
                const outputTax = revenue - (revenue / (1 + vatRate));
                
                // è®¡ç®—å¢å€¼ç¨
                const vat = outputTax - inputTax;
                totalVat += vat;
                
                // è®¡ç®—åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨
                const urbanTax = vat * urbanTaxRate;
                totalUrbanTax += urbanTax;
                
                // è®¡ç®—æ•™è‚²è´¹é™„åŠ 
                const educationTax = vat * educationTaxRate;
                totalEducationTax += educationTax;
                
                console.log(`ç¬¬${year}å¹´:`);
                console.log(`  è¥ä¸šæ”¶å…¥: ${revenue.toFixed(2)}`);
                console.log(`  é”€é¡¹ç¨é¢: ${outputTax.toFixed(2)}`);
                console.log(`  å¢å€¼ç¨: ${vat.toFixed(2)}`);
                console.log(`  åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨: ${urbanTax.toFixed(2)}`);
                console.log(`  æ•™è‚²è´¹é™„åŠ : ${educationTax.toFixed(2)}`);
                console.log('');
            });
            
            console.log("åˆè®¡:");
            console.log(`  å¢å€¼ç¨åˆè®¡: ${totalVat.toFixed(2)}`);
            console.log(`  åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨åˆè®¡: ${totalUrbanTax.toFixed(2)}`);
            console.log(`  æ•™è‚²è´¹é™„åŠ åˆè®¡: ${totalEducationTax.toFixed(2)}`);
            
            // éªŒè¯é¡µé¢æ˜¾ç¤ºçš„æ•°å€¼
            const pageVatTotal = parseFloat(document.getElementById('vat-total').textContent);
            const pageUrbanTaxTotal = parseFloat(document.getElementById('urban-tax-total').textContent);
            const pageEducationTaxTotal = parseFloat(document.getElementById('education-tax-total').textContent);
            
            console.log('\n=== é¡µé¢æ•°å€¼éªŒè¯ ===');
            console.log(`é¡µé¢å¢å€¼ç¨åˆè®¡: ${pageVatTotal.toFixed(2)} (è®¡ç®—å€¼: ${totalVat.toFixed(2)})`);
            console.log(`é¡µé¢åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨åˆè®¡: ${pageUrbanTaxTotal.toFixed(2)} (è®¡ç®—å€¼: ${totalUrbanTax.toFixed(2)})`);
            console.log(`é¡µé¢æ•™è‚²è´¹é™„åŠ åˆè®¡: ${pageEducationTaxTotal.toFixed(2)} (è®¡ç®—å€¼: ${totalEducationTax.toFixed(2)})`);
            
            // éªŒè¯æ˜¯å¦ä¸€è‡´
            const isVatCorrect = Math.abs(pageVatTotal - totalVat) < 0.01;
            const isUrbanTaxCorrect = Math.abs(pageUrbanTaxTotal - totalUrbanTax) < 0.01;
            const isEducationTaxCorrect = Math.abs(pageEducationTaxTotal - totalEducationTax) < 0.01;
            
            console.log('\n=== éªŒè¯ç»“æœ ===');
            console.log(`å¢å€¼ç¨è®¡ç®—æ­£ç¡®: ${isVatCorrect ? 'âœ…' : 'âŒ'}`);
            console.log(`åŸå¸‚å»ºè®¾ç»´æŠ¤ç¨è®¡ç®—æ­£ç¡®: ${isUrbanTaxCorrect ? 'âœ…' : 'âŒ'}`);
            console.log(`æ•™è‚²è´¹é™„åŠ è®¡ç®—æ­£ç¡®: ${isEducationTaxCorrect ? 'âœ…' : 'âŒ'}`);
            
            return {
                vatCorrect: isVatCorrect,
                urbanTaxCorrect: isUrbanTaxCorrect,
                educationTaxCorrect: isEducationTaxCorrect
            };
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡ŒéªŒè¯
        window.onload = function() {
            verifyCalculations();
        };
    </script>
</body>
</html>